import os
from telegram import InlineKeyboardButton, InlineKeyboardMarkup, Update
from telegram.constants import ParseMode
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, MessageHandler, filters
from flask import Flask, request

app = Flask(__name__)  # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Flask

bot = Application.builder().token("8067977824:AAEUbQZxUJQNjS7Jo3HrpvS-b2fecjEcmKw").build()  # –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞

# –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
questions = [
    {
        "text": "–ö–∞–∫–∞—è –ø–µ—Å–Ω—è –ª—É—á—à–µ –≤—Å–µ–≥–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–≤–æ–π 2024 –≥–æ–¥?",
        "options": [
            ["üëë –ê–Ω–Ω–∞ –ê—Å—Ç–∏ ‚Äî –¶–∞—Ä–∏—Ü–∞", "üëë"],
            ["üöÄ Billie Eilish - lovely", "üöÄ"],
            ["üçå Conkarah ft. ShaggyBanana ‚Äî Banana", "üçå"],
            ["üéß ROSEÃÅ & Bruno Mars - APT", "üéß"],
            ["üåÄ Pink Floyd ‚Äî Time", "üåÄ"],
            ["üìã Michael Jackson ‚Äî Smooth Criminal", "üìã"]
        ]
    },
    {
        "text": "–¢–µ–±—è –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º(–æ–π) –∑–∞ –≤–∞–∂–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. –ß—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å?",
        "options": [
            ["–ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ! –í—Å—ë –±—É–¥–µ—Ç —Ç–∞–∫, –∫–∞–∫ —è —Å–∫–∞–∂—É.", "üëë"],
            ["–î–∞–≤–Ω–æ –∂–¥–∞–ª–∞ —à–∞–Ω—Å–∞. –ü—Ä–∏—Å—Ç—É–ø–∞—é!", "üöÄ"],
            ["–ü–æ—Å–º–æ—Ç—Ä—é –≤–¥–∞–ª—å —Å —É–º–Ω—ã–º –≤–∏–¥–æ–º...", "üçå"],
            ["–†–∞—Å—Å–∫–∞–∂—É –¥—Ä—É–∑—å—è–º, –≤–º–µ—Å—Ç–µ –ø–æ–¥—É–º–∞–µ–º.", "üéß"],
            ["–ü—Ä–æ–µ–∫—Ç? –°–Ω–æ–≤–∞? –ê‚Ä¶", "üåÄ"],
            ["–ë—É–¥—É –¥–µ–ª–∞—Ç—å –≤—Å—ë —Å—Ç—Ä–æ–≥–æ –ø–æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—É.", "üìã"]
        ]
    },
    {
        "text": "–¢—ã –ø–æ–ø–∞–ª(–∞) –≤ –Ω–µ–∑–Ω–∞–∫–æ–º–æ–µ –º–µ—Å—Ç–æ. –ß—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º?",
        "options": [
            ["–í—Å–µ–º —Å–∫–∞–∂—É, —á—Ç–æ –¥–µ–ª–∞—Ç—å.", "üëë"],
            ["–ù–∞—á–Ω—É –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å, –∑–Ω–∞–Ω–∏–µ ‚Äî —Å–∏–ª–∞.", "üöÄ"],
            ["–ó–∞–±–µ—Ä—É—Å—å –∫—É–¥–∞-–Ω–∏–±—É–¥—å –ø–æ–≤—ã—à–µ...", "üçå"],
            ["–û—Ç–ø—Ä–∞–≤–ª—é —Ñ–æ—Ç–æ –¥—Ä—É–∑—å—è–º!", "üéß"],
            ["–ö—É–¥–∞? –ü–æ—á–µ–º—É? –ì–¥–µ —Å—Ç–æ–ª–æ–≤–∞—è?", "üåÄ"],
            ["–ù–∞–π–¥—É –≥–ª–∞–≤–Ω–æ–≥–æ, –¥–æ–ª–æ–∂—É –æ–±—Å—Ç–∞–Ω–æ–≤–∫—É.", "üìã"]
        ]
    },
    {
        "text": "–ß—Ç–æ —Ç—ã –≤–æ–∑—å–º—ë—à—å —Å —Å–æ–±–æ–π –≤ –∫–æ—Å–º–∏—á–µ—Å–∫—É—é —ç–∫—Å–ø–µ–¥–∏—Ü–∏—é?",
        "options": [
            ["–ó–µ—Ä–∫–∞–ª–æ. –ù—É–∂–Ω–æ –≤—ã–≥–ª—è–¥–µ—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ.", "üëë"],
            ["–ó–≤—ë–∑–¥–Ω—ã–µ –∫–∞—Ä—Ç—ã –∏ –¥–Ω–µ–≤–Ω–∏–∫ –¥–ª—è –∑–∞–ø–∏—Å–µ–π.", "üöÄ"],
            ["–ó–∞–ø–∞—Å –±–∞–Ω–∞–Ω–æ–≤.", "üçå"],
            ["–ú—É–∑—ã–∫–∞–ª—å–Ω—É—é –∫–æ–ª–æ–Ω–∫—É.", "üéß"],
            ["–¢–µ—Ä–º–æ–∫—Ä—É–∂–∫—É —Å –∫–æ—Ñ–µ.", "üåÄ"],
            ["–ö–æ–Ω–µ—á–Ω–æ, –±–ª–∞—Å—Ç–µ—Ä!", "üìã"]
        ]
    },
    {
        "text": "–ö–∞–∫–æ–π –º–æ–º–µ–Ω—Ç –∏–∑ —Ç–≤–æ–µ–≥–æ 2024 –≥–æ–¥–∞ —Ç—ã –≤—Å–ø–æ–º–∏–Ω–∞–µ—à—å —á–∞—â–µ –≤—Å–µ–≥–æ?",
        "options": [
            ["–Ø —Å–Ω–æ–≤–∞ –≤—Å–µ—Ö –ø–µ—Ä–µ–∏–≥—Ä–∞–ª(–∞).", "üëë"],
            ["–Ø —Å–¥–µ–ª–∞–ª(–∞) —Ç–æ, –æ —á—ë–º –º–µ—á—Ç–∞–ª(–∞) —Å –¥–µ—Ç—Å—Ç–≤–∞!", "üöÄ"],
            ["–ü—Ä–æ–¥–∞–ª(–∞) –±–∞–Ω–∞–Ω –Ω–∞ —Å–∫–æ—Ç—á–µ –∑–∞ 100 000$!", "üçå"],
            ["–Ø –ø—Ä–æ–≤—ë–ª(–∞) –ª—É—á—à–∏–π –≤–µ—á–µ—Ä —Å –¥—Ä—É–∑—å—è–º–∏!", "üéß"],
            ["–£—Å–ø–µ–ª(–∞) –≤—Å—ë –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç!", "üåÄ"],
            ["–°–æ–∑–¥–∞–ª —Å–∞–º—É—é –∫—Ä–∞—Å–∏–≤—É—é —Ç–∞–±–ª–∏—Ü—É –≤ Excel!", "üìã"]
        ]
    }
]
def get_result_text(category):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏."""
    results = {
        "üëë": {
            "image_url": "https://imgur.com/jBxcIhG",  # URL –∫–∞—Ä—Ç–∏–Ω–∫–∏
            "text": """
*–ö–∞–Ω—Ü–ª–µ—Ä*

–ü—Ä–∏—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –ª–∏–¥–µ—Ä. –ò–Ω–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç—å ‚Äî –ª—é–¥–∏ —É–∂–µ —á—É–≤—Å—Ç–≤—É—é—Ç, –∫—Ç–æ –∑–¥–µ—Å—å –≥–ª–∞–≤–Ω—ã–π. –¢—ã –º–∞—Å—Ç–µ—Ä —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–∏—Ç—É–∞—Ü–∏–µ–π, —Ä–∞–∑–¥–∞–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –∏ –∑–∞—Å—Ç–∞–≤–ª—è—Ç—å –æ–∫—Ä—É–∂–∞—é—â–∏—Ö –≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë –∏–¥—ë—Ç –ø–æ –ø–ª–∞–Ω—É‚Ä¶ –¥–∞–∂–µ –µ—Å–ª–∏ –ø–ª–∞–Ω —Ç–æ–ª—å–∫–æ —á—Ç–æ —Ä–æ–¥–∏–ª—Å—è —É —Ç–µ–±—è –≤ –≥–æ–ª–æ–≤–µ.

‚ú® –¢–≤–æ—ë –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ 2025 –≥–æ–¥:
–≠—Ç–æ—Ç –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç —Ç–µ–±–µ –Ω–æ–≤—ã–µ –≤–µ—Ä—à–∏–Ω—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º —Ç—ã —Å–º–æ–∂–µ—à—å –ø—Ä–∏–π—Ç–∏ —Å –∫–æ—Ä–æ–ª–µ–≤—Å–∫–æ–π –≥—Ä–∞—Ü–∏–µ–π (–∏–ª–∏ —Ö–æ—Ç—è –±—ã —É–±–µ–¥–∏—Ç—å –≤—Å–µ—Ö, —á—Ç–æ —Ç—ã —É–∂–µ —Ç–∞–º). –ú–∏—Ä –≥–æ—Ç–æ–≤ –ø–æ–¥—Å—Ç—Ä–æ–∏—Ç—å—Å—è –ø–æ–¥ —Ç–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞.

–ê –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –º–æ–∂–Ω–æ –Ω–∞ –ø–æ–∫–∞–∑–µ ¬´–°–æ—á–∏–Ω–µ–Ω–∏—è –±—É–¥—É—â–µ–≥–æ¬ª. –ú–µ–∂–≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –∫–∞–Ω–∏–∫—É–ª –∂–¥—ë—Ç. –ú–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã. üé≠üöÄ

üëâ [–ü–æ–ª—É—á–∏—Ç—å –±–∏–ª–µ—Ç –Ω–∞ —Å–ø–µ–∫—Ç–∞–∫–ª—å](https://marka-2023.timepad.ru/event/2953095/)
            """
        },
        "üöÄ": {
            "image_url": "https://imgur.com/xIMCine",  # URL –∫–∞—Ä—Ç–∏–Ω–∫–∏
            "text": """
*–ê–ª–∏—Å–∞ –°—É–±–±–æ—Ç–∏–Ω–∞*

–¢—ã ‚Äî —Ü–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª—ë–Ω–Ω—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å, –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã–π –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –Ω–µ–∏–∑–≤–µ–¥–∞–Ω–Ω–æ–µ. –¢—ã –∑–Ω–∞–µ—à—å, —á–µ–≥–æ —Ö–æ—á–µ—à—å, –∏ –Ω–µ –±–æ–∏—à—å—Å—è —Ä–∞–±–æ—Ç—ã —Ä–∞–¥–∏ —Å–≤–æ–µ–π –º–µ—á—Ç—ã. –î–∞–∂–µ –≤ —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö —Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞–µ—à—å –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–ø–µ—Ä—ë–¥, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è.

‚ú® –¢–≤–æ—ë –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ 2025 –≥–æ–¥:
–û—Ç–∫—Ä–æ—é—Ç—Å—è –Ω–æ–≤—ã–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ã –∏ –ø–æ—è–≤–∏—Ç—Å—è –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –∏–∑–º–µ–Ω–∏—Ç –ø—Ä–∏–≤—ã—á–Ω—ã–π —Ö–æ–¥ —Å–æ–±—ã—Ç–∏–π. –¢—ã —Å–º–µ–ª–æ –ø–æ–π–¥—ë—à—å –≤–ø–µ—Ä—ë–¥, –∞ –±–ª–∏–∑–∫–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç —Ç–µ–±—è –Ω–∞ —ç—Ç–æ–º –ø—É—Ç–∏.

–ê –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –º–æ–∂–Ω–æ –Ω–∞ –ø–æ–∫–∞–∑–µ ¬´–°–æ—á–∏–Ω–µ–Ω–∏—è –±—É–¥—É—â–µ–≥–æ¬ª. –ú–µ–∂–≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –∫–∞–Ω–∏–∫—É–ª –∂–¥—ë—Ç. –ú–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã. üé≠üöÄ

üëâ [–ü–æ–ª—É—á–∏—Ç—å –±–∏–ª–µ—Ç –Ω–∞ —Å–ø–µ–∫—Ç–∞–∫–ª—å](https://marka-2023.timepad.ru/event/2953095/)
            """
        },
        "üçå": {
            "image_url": "https://imgur.com/XgtukZb",  # URL –∫–∞—Ä—Ç–∏–Ω–∫–∏
            "text": """
*–°–æ–Ω—è 002*

–î–∞, –°–æ–Ω–µ 002 –ø–µ—Ä–µ—Å–∞–¥–∏–ª–∏ –º–æ–∑–≥ –æ–±–µ–∑—å—è–Ω—ã. –ù—É –∏ —á—Ç–æ? –¢—ã ‚Äî –≥–µ–Ω–∏–π —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞, –º—ã—Å–ª–∏—Ç–µ–ª—å –∑–∞ –≥—Ä–∞–Ω—å—é –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ. –¢–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–µ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª–∞, —Ç—ã –≤–∏–¥–∏—à—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏. –ù–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Ç—ã –ø—Ä–∏–Ω–∏–º–∞–µ—à—å —Ä–µ—à–µ–Ω–∏—è, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å–µ–≥–¥–∞ –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç (–∞ –∏–Ω–æ–≥–¥–∞ –ø—É–≥–∞–µ—Ç).
‚ú® –¢–≤–æ—ë –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ 2025 –≥–æ–¥:
–¢–≤–æ–∏ —Å–∞–º—ã–µ —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∏ —Å–º–µ–ª—ã–µ –∏–¥–µ–∏ –Ω–∞–π–¥—É—Ç –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ. –ú–∏—Ä –Ω–∞–∫–æ–Ω–µ—Ü –ø–æ–π–º—ë—Ç, —á—Ç–æ –¥–∞–∂–µ –±–µ–∑—É–º–Ω—ã–µ –ø–æ—Å—Ç—É–ø–∫–∏ –∏–Ω–æ–≥–¥–∞ –≤–µ–¥—É—Ç –∫ —Å–∞–º—ã–º –≤–µ–ª–∏–∫–∏–º –æ—Ç–∫—Ä—ã—Ç–∏—è–º.
–ê –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –º–æ–∂–Ω–æ –Ω–∞ –ø–æ–∫–∞–∑–µ ¬´–°–æ—á–∏–Ω–µ–Ω–∏—è –±—É–¥—É—â–µ–≥–æ¬ª. –ú–µ–∂–≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –∫–∞–Ω–∏–∫—É–ª –∂–¥—ë—Ç. –ú–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã. üé≠üöÄ

üëâ [–ü–æ–ª—É—á–∏—Ç—å –±–∏–ª–µ—Ç –Ω–∞ —Å–ø–µ–∫—Ç–∞–∫–ª—å](https://marka-2023.timepad.ru/event/2953095/)
            """
        },
        "üéß": {
            "image_url": "https://imgur.com/QUrLXvh",  # URL –∫–∞—Ä—Ç–∏–Ω–∫–∏
            "text": """
*–í–∏–∫–∞ –ü—Ä–æ–∫–ª–æ–≤–∞*
–¢—ã ‚Äî –¥—É—à–∞ –ª—é–±–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–¥–µ–π. –ú–∏—Ä –¥–ª—è —Ç–µ–±—è ‚Äî —ç—Ç–æ –Ω–µ—Å–∫–æ–Ω—á–∞–µ–º–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ª—É—á—à–∏–º –º–æ–º–µ–Ω—Ç–æ–º –≥–æ–¥–∞. –¢—ã –∂–∏–≤—ë—à—å –≤ —Å—Ç–∏–ª–µ ¬´—Å–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞–π, –ø–æ—Ç–æ–º –ø–æ–¥—É–º–∞–π¬ª ‚Äî –∏ –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É —Ç–µ–±–µ —Ç–∞–∫ –≤–µ–∑—ë—Ç.

‚ú® –¢–≤–æ—ë –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ 2025 –≥–æ–¥:
–°–∞–º—ã–µ –∫—Ä—É—Ç—ã–µ –º–æ–º–µ–Ω—Ç—ã –ø—Ä–æ–∏–∑–æ–π–¥—É—Ç, –∫–æ–≥–¥–∞ —Ç—ã —ç—Ç–æ–≥–æ –Ω–µ –∂–¥—ë—à—å. –ì–æ—Ç–æ–≤—å—Å—è –∫ –Ω–µ–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—Å—Ç—Ä–µ—á–∞–º, —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã–º –ø–æ–µ–∑–¥–∫–∞–º –∏ –∏—Å—Ç–æ—Ä–∏—è–º, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è —Å —Ç–æ–±–æ–π –Ω–∞–≤—Å–µ–≥–¥–∞.

–ê –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –º–æ–∂–Ω–æ –Ω–∞ –ø–æ–∫–∞–∑–µ ¬´–°–æ—á–∏–Ω–µ–Ω–∏—è –±—É–¥—É—â–µ–≥–æ¬ª. –ú–µ–∂–≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –∫–∞–Ω–∏–∫—É–ª –∂–¥—ë—Ç. –ú–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã. üé≠üöÄ

üëâ [–ü–æ–ª—É—á–∏—Ç—å –±–∏–ª–µ—Ç –Ω–∞ —Å–ø–µ–∫—Ç–∞–∫–ª—å](https://marka-2023.timepad.ru/event/2953095/)
            """
        },
        "üåÄ": {
            "image_url": "https://imgur.com/jSShvK4",  # URL –∫–∞—Ä—Ç–∏–Ω–∫–∏
            "text": """
*–•—Ä–æ–Ω–æ—Ñ–∞–≥*
–¢—ã ‚Äî —Ç–æ—Ç, –∫—Ç–æ –º–æ–∂–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è‚Ä¶ —Ö–æ—Ç—è –±—ã –≤ —Å–≤–æ—ë–º –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–∏. –î–∞–∂–µ –∫–æ–≥–¥–∞ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –≤—Å—ë –≤–æ—Ç-–≤–æ—Ç —Ä—É—Ö–Ω–µ—Ç, —Ç—ã –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º —É–º—É–¥—Ä—è–µ—à—å—Å—è –≤—Å—ë —Å–ø–∞—Å—Ç–∏, –ø—Ä–∏—á—ë–º —Ç–∞–∫, –±—É–¥—Ç–æ –≤—Å—ë –±—ã–ª–æ —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ (—Å–ø–æ–π–ª–µ—Ä: –Ω–µ –±—ã–ª–æ).

‚ú® –¢–≤–æ—ë –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ 2025 –≥–æ–¥:
–í—Å–µ–ª–µ–Ω–Ω–∞—è –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –¥–∞—Å—Ç —Ç–µ–±–µ –Ω–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø–µ—Ä–µ–¥—ã—à–∫—É. –¢—ã —Å–º–æ–∂–µ—à—å –∑–∞–º–µ–¥–ª–∏—Ç—å—Å—è, –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –≥–Ω–∞—Ç—å—Å—è –∑–∞ –¥–µ–¥–ª–∞–π–Ω–∞–º–∏ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –¥–∞–∂–µ –Ω–∞—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –±–µ–∑ —Å—Ä–æ—á–Ω—ã—Ö —Å—Ä–æ–∫–æ–≤ (–Ω–æ —ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–æ).

–ê –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –º–æ–∂–Ω–æ –Ω–∞ –ø–æ–∫–∞–∑–µ ¬´–°–æ—á–∏–Ω–µ–Ω–∏—è –±—É–¥—É—â–µ–≥–æ¬ª. –ú–µ–∂–≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –∫–∞–Ω–∏–∫—É–ª –∂–¥—ë—Ç. –ú–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã. üé≠üöÄ

üëâ [–ü–æ–ª—É—á–∏—Ç—å –±–∏–ª–µ—Ç –Ω–∞ —Å–ø–µ–∫—Ç–∞–∫–ª—å](https://marka-2023.timepad.ru/event/2953095/)
            """
        },
        "üìã": {
            "image_url": "https://imgur.com/q6FU85W",  # URL –∫–∞—Ä—Ç–∏–Ω–∫–∏
            "text": """
*–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ø–æ–ª–∏—Ü–µ—Å–∫–∏–π*
–¢—ã ‚Äî —Å—Ç—Ä–∞–∂ –ø–æ—Ä—è–¥–∫–∞ –≤ —ç—Ç–æ–º —Ö–∞–æ—Å–µ. –í—Å—ë –≤–æ–∫—Ä—É–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º, –Ω–æ —Å —Ç–æ–±–æ–π –º–∏—Ä –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö (–ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, —Ç–∞–∫ –∫–∞–∂–µ—Ç—Å—è). –ù–∏–∫—Ç–æ –Ω–µ –ø—Ä–æ–π–¥—ë—Ç –º–∏–º–æ —Ç–≤–æ–µ–≥–æ –≤–∑–≥–ª—è–¥–∞ –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ä–æ–±–æ—Ç-—É–±–æ—Ä—â–∏–∫ –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ. *–≠–π‚Ä¶ –∫—É–¥–∞ –≤—ã –º–µ–Ω—è –≤–µ–¥—ë—Ç–µ?!*

‚ú® –¢–≤–æ—ë –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ 2025 –≥–æ–¥:
 –ì–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç –∑–∞—Å–ª—É–∂–µ–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ —Ç–≤–æ—é –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —É–ø–æ—Ä—Å—Ç–≤–æ. –¢—ã –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –ø–æ–ª—É—á–∏—à—å –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω–æ–µ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ‚Ä¶ –∏–ª–∏ —Ö–æ—Ç—è –±—ã –µ—â—ë –æ–¥–∏–Ω –∑–Ω–∞—á–æ–∫ –∑–∞ –±–µ–∑—É–ø—Ä–µ—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

–ê –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –º–æ–∂–Ω–æ –Ω–∞ –ø–æ–∫–∞–∑–µ ¬´–°–æ—á–∏–Ω–µ–Ω–∏—è –±—É–¥—É—â–µ–≥–æ¬ª. –ú–µ–∂–≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –∫–∞–Ω–∏–∫—É–ª –∂–¥—ë—Ç. –ú–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã. üé≠üöÄ

üëâ [–ü–æ–ª—É—á–∏—Ç—å –±–∏–ª–µ—Ç –Ω–∞ —Å–ø–µ–∫—Ç–∞–∫–ª—å](https://marka-2023.timepad.ru/event/2953095/)
            """
        },
    }

    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    return results.get(category, {"image_url": "", "text": "–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω. –í—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã!"})

@app.route('/' + TOKEN, methods=['POST'])
def webhook():
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞ —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫"""
    json_str = request.get_data(as_text=True)
    update = Update.de_json(json_str, bot)
    bot.process_update(update)
    return "OK"


# –•—Ä–∞–Ω–∏–º —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_data = {}

async def start(update, context):
    """–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –Ω–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∞."""
    user_id = update.effective_user.id
    user_data[user_id] = {"current_question": 0, "answers": []}

    greeting_text = (
         "¬´–°–æ—á–∏–Ω–µ–Ω–∏–µ –±—É–¥—É—â–µ–≥–æ¬ª –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 5‚Äì6 —è–Ω–≤–∞—Ä—è!\n\n"
        "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–∫—å—é–º–µ–Ω—Ç–∞—Ä–∏-—Å–ø–µ–∫—Ç–∞–∫–ª—å –ë–æ—Ä–∏—Å–∞ –ü–∞–≤–ª–æ–≤–∏—á–∞, –≥–¥–µ –∞–∫—Ç—ë—Ä—ã ‚Äî –∂–∏—Ç–µ–ª–∏ –í—ã–∫—Å—ã, –∞ –∑—Ä–∏—Ç–µ–ª–∏ ‚Äî —É—á–∞—Å—Ç–Ω–∏–∫–∏ "
        "–º–µ–∂–≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —ç–∫—Å–ø–µ–¥–∏—Ü–∏–∏ –ò–Ω—Å—Ç–∏—Ç—É—Ç–∞ –õ–µ—Ç–∞–Ω–∏—è –∏–º–µ–Ω–∏ –°—É—Ö–æ–≤–æ-–ö–æ–±—ã–ª–∏–Ω–∞.\n"
        "–ü—Ä–µ–º—å–µ—Ä–∞ —Å–æ—Å—Ç–æ—è–ª–∞—Å—å –Ω–∞ –í—ã–∫—Å–∞-—Ñ–µ—Å—Ç–∏–≤–∞–ª–µ, –∏ —Ç–µ–ø–µ—Ä—å —Å–ø–µ–∫—Ç–∞–∫–ª—å —Å–Ω–æ–≤–∞ –≥–æ—Ç–æ–≤ —É–¥–∏–≤–ª—è—Ç—å!\n\n"
        "–í –º–∏—Ä–µ ¬´–°–æ—á–∏–Ω–µ–Ω–∏—è –±—É–¥—É—â–µ–≥–æ¬ª –º–Ω–æ–∂–µ—Å—Ç–≤–æ —è—Ä–∫–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π: –≤–ª–∞—Å—Ç–Ω—ã–µ –ª–∏–¥–µ—Ä—ã, –∞–º–±–∏—Ü–∏–æ–∑–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª–∏—Ü–µ–π—Å–∫–∏–µ, "
        "–º–µ—á—Ç–∞—Ç–µ–ª–∏ –∏ –¥–∞–∂–µ –∑–∞–≥–∞–¥–æ—á–Ω—ã–µ —Ö—Ä–æ–Ω–æ—Ñ–∞–≥–∏...\n\n"
        "–ù–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏–∑ –Ω–∏—Ö –º—ã –ø–æ–º–µ—Å—Ç–∏–ª–∏ –≤ —Ç–µ—Å—Ç.\n"
        "–ü—Ä–æ–π–¥–∏ –µ–≥–æ, —É–∑–Ω–∞–π, –∫—Ç–æ —Ç—ã –≤ —ç—Ç–æ–π –≤—Å–µ–ª–µ–Ω–Ω–æ–π, –∏ –ø–æ–ª—É—á–∏ —Å–≤–æ—ë –∫–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ 2025 –≥–æ–¥. üöÄ"
    )


    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await update.message.reply_text(greeting_text)

    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–µ—Ä–≤–æ–º—É –≤–æ–ø—Ä–æ—Å—É
    await ask_question(update, context)


async def ask_question(update, context):
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é."""
    user_id = update.effective_user.id
    current_question = user_data[user_id]["current_question"]

    question = questions[current_question]
    options = [[InlineKeyboardButton(text, callback_data=data)] for text, data in question["options"]]
    keyboard = InlineKeyboardMarkup(options)

    if update.callback_query:
        await update.callback_query.edit_message_text(question["text"], reply_markup=keyboard)
    else:
        await update.message.reply_text(question["text"], reply_markup=keyboard)

import logging

logging.basicConfig(level=logging.DEBUG)  # –í–∫–ª—é—á–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –∏ –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
async def button_click(update, context):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É."""
    query = update.callback_query
    user_id = query.from_user.id

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
    if user_id not in user_data:
        user_data[user_id] = {"current_question": 0, "answers": []}
    user_data[user_id]["answers"].append(query.data)

    # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
    current_question = user_data[user_id]["current_question"]
    if current_question + 1 < len(questions):
        user_data[user_id]["current_question"] += 1
        await ask_question(update, context)
    else:
        # –ü–æ–¥—Å—á—ë—Ç –±–∞–ª–ª–æ–≤
        results = {}
        for answer in user_data[user_id]["answers"]:
            results[answer] = results.get(answer, 0) + 1
        most_common = max(results, key=results.get)

        # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –∏ –∫–∞—Ä—Ç–∏–Ω–∫—É
        result = get_result_text(most_common)
        result_text = result["text"]
        image_url = result["image_url"]

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        if image_url:
            await query.message.reply_photo(image_url)

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å –∂–∏—Ä–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
        if result_text:
            result_with_bold_title = f"*{most_common}*\n\n{result_text}"
            await query.message.reply_text(result_with_bold_title, parse_mode=ParseMode.MARKDOWN)

        # –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
        if user_id in user_data:
            del user_data[user_id]


async def handle_message(update, context):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è."""
    text = update.message.text.lower()
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∞
    if text in ["–Ω–∞—á–∞—Ç—å", "–Ω–∞—á–∞–ª–æ"] and update.message.from_user.id not in user_data:
        await start(update, context)  # –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç, –µ—Å–ª–∏ –µ–≥–æ –µ—â—ë –Ω–µ—Ç
    elif update.message.from_user.id in user_data:
        # –ï—Å–ª–∏ —Ç–µ—Å—Ç —É–∂–µ –Ω–∞—á–∞—Ç, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        await update.message.reply_text("–¢—ã —É–∂–µ –ø—Ä–æ—Ö–æ–¥–∏—à—å —Ç–µ—Å—Ç.")

if __name__ == "__main__":
    import logging

    logging.basicConfig(
        format="%(asctime)s - %(name)s - %(levelname)s - %(message)s",
        level=logging.INFO,
    )
if __name__ == "__main__":
    app.run(host="0.0.0.0", port=int(os.environ.get("PORT", 5000)))  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è PORT



    app = Application.builder().token("8067977824:AAEUbQZxUJQNjS7Jo3HrpvS-b2fecjEcmKw").build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(button_click))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

    app.run_polling()

